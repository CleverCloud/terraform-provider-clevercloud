---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "clevercloud_drain_newrelic Resource - terraform-provider-clevercloud"
description: |-
  clevercloud_drain_*
  Manage Clever Cloud drains to forward application logs to external destinations.
  Drains allow you to stream logs from your Clever Cloud applications to external log aggregation services like Datadog, New Relic, Elasticsearch, or generic HTTP/Syslog endpoints.
  Available Drain Types
  clevercloud_drain_datadog
  Forward logs to Datadog.
  
  resource "clevercloud_drain_datadog" "example" {
    resource_id = clevercloud_nodejs.app.id
    kind        = "LOG"
    url         = "https://http-intake.logs.datadoghq.com/v1/input/YOUR_API_KEY"
  }
  
  clevercloud_drain_newrelic
  Forward logs to New Relic.
  
  resource "clevercloud_drain_newrelic" "example" {
    resource_id = clevercloud_nodejs.app.id
    kind        = "LOG"
    url         = "https://log-api.newrelic.com/log/v1"
    api_key     = "YOUR_NEW_RELIC_API_KEY"
  }
  
  clevercloud_drain_elasticsearch
  Forward logs to Elasticsearch.
  
  resource "clevercloud_drain_elasticsearch" "example" {
    resource_id      = clevercloud_nodejs.app.id
    kind             = "LOG"
    url              = "https://your-elasticsearch-cluster.com"
    username         = "elastic"
    password         = "your-password"
    index            = "clever-cloud-logs"
    tls_verification = "DEFAULT"
  }
  
  clevercloud_drain_http
  Forward logs to any HTTP endpoint.
  
  resource "clevercloud_drain_http" "example" {
    resource_id = clevercloud_nodejs.app.id
    kind        = "LOG"
    url         = "https://your-log-collector.example.com/logs"
  }
  
  clevercloud_drain_syslog_tcp
  Forward logs via Syslog over TCP.
  
  resource "clevercloud_drain_syslog_tcp" "example" {
    resource_id = clevercloud_nodejs.app.id
    kind        = "LOG"
    url         = "tcp://syslog.example.com:514"
    token       = "your-auth-token"
  }
  
  clevercloud_drain_syslog_udp
  Forward logs via Syslog over UDP.
  
  resource "clevercloud_drain_syslog_udp" "example" {
    resource_id = clevercloud_nodejs.app.id
    kind        = "LOG"
    url         = "udp://syslog.example.com:514"
    token       = "your-auth-token"
  }
  
  clevercloud_drain_ovh
  Forward logs to OVH Logs Data Platform.
  
  resource "clevercloud_drain_ovh" "example" {
    resource_id                         = clevercloud_nodejs.app.id
    kind                                = "LOG"
    url                                 = "https://gra1.logs.ovh.com/logs/YOUR_STREAM_TOKEN"
    token                               = "YOUR_OVH_TOKEN"
    rfc5424_structured_data_parameters  = "optional parameters"
  }
  
  Arguments Reference
  Common Arguments
  resource_id (Required) - ID of the application or product that supports log drainskind (Optional) - Type of logs to drain: LOG, ACCESSLOGS, or AUDITLOG. Defaults to LOG
  Drain-Specific Arguments
  Each drain type has specific configuration parameters based on the destination service requirements.
  Attributes Reference
  id - The unique identifier of the drain
  Important Notes
  Resource Replacement
  All drain attributes require resource replacement when changed. This means:
  Any change to drain configuration will destroy and recreate the resourceThis is enforced through Terraform's RequiresReplace plan modifiersUpdate operations are not supported by the Clever Cloud Drains API
  Security
  Sensitive attributes like api_key, password, and token are marked as sensitiveUse Terraform variables or environment variables for sensitive valuesSensitive values will not be displayed in Terraform plans or state files
  Import
  Drains can be imported using their ID:
  
  terraform import clevercloud_drain_datadog.example drain_12345678-abcd-1234-5678-123456789abc
---

# clevercloud_drain_newrelic (Resource)

# clevercloud_drain_*

Manage Clever Cloud drains to forward application logs to external destinations.

Drains allow you to stream logs from your Clever Cloud applications to external log aggregation services like Datadog, New Relic, Elasticsearch, or generic HTTP/Syslog endpoints.

## Available Drain Types

### clevercloud_drain_datadog

Forward logs to Datadog.

```hcl
resource "clevercloud_drain_datadog" "example" {
  resource_id = clevercloud_nodejs.app.id
  kind        = "LOG"
  url         = "https://http-intake.logs.datadoghq.com/v1/input/YOUR_API_KEY"
}
```

### clevercloud_drain_newrelic

Forward logs to New Relic.

```hcl
resource "clevercloud_drain_newrelic" "example" {
  resource_id = clevercloud_nodejs.app.id
  kind        = "LOG"
  url         = "https://log-api.newrelic.com/log/v1"
  api_key     = "YOUR_NEW_RELIC_API_KEY"
}
```

### clevercloud_drain_elasticsearch

Forward logs to Elasticsearch.

```hcl
resource "clevercloud_drain_elasticsearch" "example" {
  resource_id      = clevercloud_nodejs.app.id
  kind             = "LOG"
  url              = "https://your-elasticsearch-cluster.com"
  username         = "elastic"
  password         = "your-password"
  index            = "clever-cloud-logs"
  tls_verification = "DEFAULT"
}
```

### clevercloud_drain_http

Forward logs to any HTTP endpoint.

```hcl
resource "clevercloud_drain_http" "example" {
  resource_id = clevercloud_nodejs.app.id
  kind        = "LOG"
  url         = "https://your-log-collector.example.com/logs"
}
```

### clevercloud_drain_syslog_tcp

Forward logs via Syslog over TCP.

```hcl
resource "clevercloud_drain_syslog_tcp" "example" {
  resource_id = clevercloud_nodejs.app.id
  kind        = "LOG"
  url         = "tcp://syslog.example.com:514"
  token       = "your-auth-token"
}
```

### clevercloud_drain_syslog_udp

Forward logs via Syslog over UDP.

```hcl
resource "clevercloud_drain_syslog_udp" "example" {
  resource_id = clevercloud_nodejs.app.id
  kind        = "LOG"
  url         = "udp://syslog.example.com:514"
  token       = "your-auth-token"
}
```

### clevercloud_drain_ovh

Forward logs to OVH Logs Data Platform.

```hcl
resource "clevercloud_drain_ovh" "example" {
  resource_id                         = clevercloud_nodejs.app.id
  kind                                = "LOG"
  url                                 = "https://gra1.logs.ovh.com/logs/YOUR_STREAM_TOKEN"
  token                               = "YOUR_OVH_TOKEN"
  rfc5424_structured_data_parameters  = "optional parameters"
}
```

## Arguments Reference

### Common Arguments

- `resource_id` (Required) - ID of the application or product that supports log drains
- `kind` (Optional) - Type of logs to drain: `LOG`, `ACCESSLOGS`, or `AUDITLOG`. Defaults to `LOG`

### Drain-Specific Arguments

Each drain type has specific configuration parameters based on the destination service requirements.

## Attributes Reference

- `id` - The unique identifier of the drain

## Important Notes

### Resource Replacement
**All drain attributes require resource replacement when changed.** This means:
- Any change to drain configuration will destroy and recreate the resource
- This is enforced through Terraform's `RequiresReplace` plan modifiers
- Update operations are not supported by the Clever Cloud Drains API

### Security
- Sensitive attributes like `api_key`, `password`, and `token` are marked as sensitive
- Use Terraform variables or environment variables for sensitive values
- Sensitive values will not be displayed in Terraform plans or state files

## Import

Drains can be imported using their ID:

```bash
terraform import clevercloud_drain_datadog.example drain_12345678-abcd-1234-5678-123456789abc
```



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `api_key` (String, Sensitive) New Relic API key used for ingestion
- `resource_id` (String) Application or product ID which support logs drains
- `url` (String) New Relic log API URL (e.g. https://log-api.newrelic.com/log/v1 or https://log-api.eu.newrelic.com/log/v1)

### Optional

- `kind` (String) either LOG, ACCESSLOG or AUDITLOG

### Read-Only

- `id` (String) Drain ID
